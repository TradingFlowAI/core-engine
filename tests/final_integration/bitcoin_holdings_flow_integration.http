### æ¯”ç‰¹å¸æŒä»“æ•°æ®æŠ“å–Flowé›†æˆæµ‹è¯•
### åŸºäºå‰ç«¯çœŸå®ç”Ÿæˆçš„Flowæ•°æ®æ ¼å¼

@baseUrl = http://localhost:7002
@flowId = 68b2f57894dac2d8e87be342
@userId = 684c36ce23a411dff96ff68a
@componentId = 0
@cycle = 0
@codeNodeId = code_node_1
@datasetNodeId = dataset_output_node_1
@docLink = https://docs.google.com/spreadsheets/d/1uQvzsNIkaan67wFijnDiixusw9qNZnedW4Q3dWJASBM/edit?gid=0#gid=0
@createdAt = 2025-08-04T05:34:32.590Z

### 0. è¾“å‡ºæ‰€æœ‰ Nodes çš„æ‰§è¡Œæƒ…å†µ
GET {{baseUrl}}/nodes

### 1. æµ‹è¯• [ code_node æ‰§è¡Œ ]
# @name execute_code_node
POST {{baseUrl}}/nodes/execute
Content-Type: application/json

{
  "flow_id": "{{flowId}}",
  "component_id": {{componentId}},
  "cycle": {{cycle}},
  "node_id": "{{codeNodeId}}",
  "node_type": "code_node",
  "input_edges": [],
  "output_edges": [
    {
      "source": "{{codeNodeId}}",
      "source_handle": "output_data",
      "target": "{{datasetNodeId}}",
      "target_handle": "data"
    }
  ],
  "config": {
    "node_class_type": "code_node",
    "python_code": "import requests\nfrom bs4 import BeautifulSoup\nimport pandas as pd\n\nprint(\"ğŸš€ å¼€å§‹æ”¶é›†æ¯”ç‰¹å¸è´¢å¯Œæ•°æ®...\")\n\n# æ¨¡æ‹Ÿæ•°æ®æ”¶é›†ï¼ˆé¿å…ç½‘ç»œä¾èµ–ï¼‰\nsample_data = [\n['MicroStrategy', '0.70%', '190,000', '$18.4B', '$18.4B', 'Q3 2024'],\n['Tesla', '0.10%', '9,720', '$941M', '$1.50B', 'Q1 2021'],\n['Marathon Digital', '0.08%', '26,200', '$2.54B', '$1.59B', 'Nov 2024'],\n['Coinbase', '0.05%', '9,000', '$872M', '$1.20B', 'Q2 2024']\n]\n\nprint(f\"ğŸ“Š æ”¶é›†åˆ° {len(sample_data)} æ¡è®°å½•\")\n\n# æ ¼å¼åŒ–è¾“å‡ºæ•°æ®\ndf = pd.DataFrame(sample_data, columns=['Company', 'Market_Cap_Pct', 'Bitcoin_Holdings', 'Current_Value', 'Total_Cost', 'Last_Updated'])\nsummary = {\n\"total_companies\": len(df),\n\"top_companies\": df['Company'].head(3).tolist(),\n\"data_source\": \"bitcointreasuries.net\",\n\"collection_time\": \"2025-08-02 20:35:00\"\n}\n\noutput_data = {\n\"bitcoin_summary\": f\"æˆåŠŸæ”¶é›†åˆ° {summary['total_companies']} å®¶å…¬å¸çš„æ¯”ç‰¹å¸æŒä»“æ•°æ®\",\n\"top_holders\": summary['top_companies'],\n\"data_count\": summary['total_companies'],\n\"source\": summary['data_source']\n}",
    "input_data": {}
  }
}

### 1.1 ç»¼åˆæ£€æŸ¥çŠ¶æ€
GET {{baseUrl}}/flows/{{flowId}}/comprehensive-status

### 2. æ£€æŸ¥
# @name get_code_node_status
GET {{baseUrl}}/nodes/{{codeNodeId}}/status

### 3. æµ‹è¯• [ dataset_output_node æ‰§è¡Œ ]
# @name execute_dataset_node
POST {{baseUrl}}/nodes/execute
Content-Type: application/json

{
  "flow_id": "{{flowId}}",
  "component_id": {{componentId}},
  "cycle": {{cycle}},
  "node_id": "{{datasetNodeId}}",
  "node_type": "dataset_output_node",
  "input_edges": [
    {
      "source": "{{codeNodeId}}",
      "source_handle": "output_data",
      "target": "{{datasetNodeId}}",
      "target_handle": "data"
    }
  ],
  "output_edges": [],
  "config": {
    "node_class_type": "dataset_output_node",
    "doc_link": "{{docLink}}"
  }
}

### 4. æ£€æŸ¥
# @name get_dataset_node_status
GET {{baseUrl}}/nodes/{{datasetNodeId}}/status

### 5. æµ‹è¯• [ flow æ‰§è¡Œ ]
# @name execute_complete_flow
POST {{baseUrl}}/flows/execute
Content-Type: application/json

{
  "flow_id": "{{flowId}}",
  "cycle_interval": "0",
  "flow_json": {
    "nodes": [
      {
        "id": "{{codeNodeId}}",
        "type": "code_node",
        "config": {
          "node_class_type": "code_node",
          "python_code": "import requests\nfrom bs4 import BeautifulSoup\nimport pandas as pd\n\nprint(\"ğŸš€ å¼€å§‹æ”¶é›†æ¯”ç‰¹å¸è´¢å¯Œæ•°æ®...\")\n\n# æ¨¡æ‹Ÿæ•°æ®æ”¶é›†ï¼ˆé¿å…ç½‘ç»œä¾èµ–ï¼‰\nsample_data = [\n['MicroStrategy', '0.70%', '190,000', '$18.4B', '$18.4B', 'Q3 2024'],\n['Tesla', '0.10%', '9,720', '$941M', '$1.50B', 'Q1 2021'],\n['Marathon Digital', '0.08%', '26,200', '$2.54B', '$1.59B', 'Nov 2024'],\n['Coinbase', '0.05%', '9,000', '$872M', '$1.20B', 'Q2 2024']\n]\n\nprint(f\"ğŸ“Š æ”¶é›†åˆ° {len(sample_data)} æ¡è®°å½•\")\n\n# æ ¼å¼åŒ–è¾“å‡ºæ•°æ®\ndf = pd.DataFrame(sample_data, columns=['Company', 'Market_Cap_Pct', 'Bitcoin_Holdings', 'Current_Value', 'Total_Cost', 'Last_Updated'])\nsummary = {\n\"total_companies\": len(df),\n\"top_companies\": df['Company'].head(3).tolist(),\n\"data_source\": \"bitcointreasuries.net\",\n\"collection_time\": \"2025-08-02 20:35:00\"\n}\n\noutput_data = {\n\"bitcoin_summary\": f\"æˆåŠŸæ”¶é›†åˆ° {summary['total_companies']} å®¶å…¬å¸çš„æ¯”ç‰¹å¸æŒä»“æ•°æ®\",\n\"top_holders\": summary['top_companies'],\n\"data_count\": summary['total_companies'],\n\"source\": summary['data_source']\n}",
          "input_data": {}
        }
      },
      {
        "id": "{{datasetNodeId}}",
        "type": "dataset_output_node",
        "config": {
          "node_class_type": "dataset_output_node",
          "data": {},
          "doc_link": "{{docLink}}"
        }
      }
    ],
    "edges": [
      {
        "source": "{{codeNodeId}}",
        "source_handle": "output_data",
        "target": "{{datasetNodeId}}",
        "target_handle": "data"
      }
    ]
  },
  "user_id": "{{userId}}",
  "created_at": "{{createdAt}}"
}


### 6. æ£€æŸ¥ Flow
# @name get_flow_status
GET {{baseUrl}}/flows/{{flowId}}/status

### 7. åœæ­¢ Flow
# @name stop_flow
POST {{baseUrl}}/flows/{{flowId}}/stop

### 8. è·å–Flowæ‰§è¡Œå†å²
# @name get_flow_history
GET {{baseUrl}}/flows/{{flowId}}/history
